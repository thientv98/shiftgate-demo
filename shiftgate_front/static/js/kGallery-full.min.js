function kSlideshow(e){kSlideshowVersion="1.2.1";var t,a={wrapper:"#slideshow-wrapper",dataSource:"data.json",url:void 0,dataType:"json",autoPlay:!1,startItem:0,preloadImagesCount:2,nextAttempts:4,interval:2e3,fadeDelay:400,itemDivClass:"kSlideshowItemDiv",enableControls:!0,enableTitle:!0,enableAlt:!0,displayEmptyTitle:!1,wrapperClass:"kSlideshowWrapper",playToggleClass:"kSlideshowPlayToggle",playClass:"kSlideshowPlay",pauseClass:"kSlideshowPause",nextClass:"kSlideshowNext",prevClass:"kSlideshowPrev",titleClass:"kSlideshowTitle",controlsInactiveClass:"inactive",loadedClass:"loaded",afterInit:function(){},beforeShow:function(e){},beforeAnimation:function(e,t){},afterShow:function(){},onLoadingError:function(e,t,a){}},n={};return n.items=[],n.wrapper,n.isPlay=!1,n.playInterval,n.currentItemIndex,n.prevButton,n.playToggleButton,n.nextButton,n.init=function(){n.wrapper=jQuery(t.wrapper),n.wrapper.addClass(t.wrapperClass),n.isPlay=!1,n.items.length<=1&&(t.enableControls=!1,t.autoPlay=!1),1==t.enableControls&&n.initControls(),t.preloadImagesCount>n.items.length&&(t.preloadImagesCount=n.items.length),n.currentItemIndex=t.startItem,n.showItem(n.currentItemIndex),n.preloadItems(n.currentItemIndex),1==t.autoPlay?n.play():(1==t.enableControls&&n.playToggleButton.addClass(t.playClass),n.preloadItemsPrev(n.currentItemIndex))},n.initControls=function(){t.enableControls=!0,n.prevButton||(n.prevButton=jQuery('<div class="'+t.prevClass+'"></div>').appendTo(n.wrapper)),n.prevButton.click(function(){n.prev()}),n.playToggleButton||(n.playToggleButton=jQuery('<div class="'+t.playToggleClass+'"></div>').appendTo(n.wrapper)),n.playToggleButton.click(function(){n.playToggle()}),n.nextButton||(n.nextButton=jQuery('<div class="'+t.nextClass+'"></div>').appendTo(n.wrapper)),n.nextButton.click(function(){n.next()})},n.addItem=function(e){var a=n.items[e],r=new Image;r.src=a.large,$(r).load(function(){n.items[e].loaded=!0,$(n.items[e].node).addClass(t.loadedClass)});var s="";if(1==t.enableTitle&&(null!=a.title?s='<div class="'+t.titleClass+'">'+a.title+"</div>":1==t.displayEmptyTitle&&(s='<div class="'+t.titleClass+'"></div>')),1==t.enableAlt)var i=n.stripTags(a.title);else i="";var l=jQuery('<div class="'+t.itemDivClass+'" style="display: none;"><img src="'+a.large+'" alt="'+i+'" title="'+i+'" class="" />'+s+"</div>").appendTo(n.wrapper);return n.items[e].node=l,l},n.preloadItems=function(){for(var e=1;e<=t.preloadImagesCount;e++){var a=n.currentItemIndex+e;a>=n.items.length&&(a-=n.items.length),n.items[a]&&!n.items[a].node&&n.addItem(a)}},n.preloadItemsPrev=function(){for(var e=1;e<=t.preloadImagesCount;e++){var a=n.currentItemIndex-e;a<0&&(a+=n.items.length),n.items[a]&&!n.items[a].node&&n.addItem(a)}},n.play=function(){clearInterval(n.playInterval),n.playInterval=setInterval(function(){n.next(!0,!0)},t.interval),n.isPlay=!0,1==t.enableControls&&(n.playToggleButton.addClass(t.pauseClass),n.playToggleButton.removeClass(t.playClass))},n.playToggle=function(){return 0==n.isPlay?(n.play(),"play"):1==n.isPlay?(n.stop(),"stop"):void alert("Error: wrong play status in .playToggle()")},n.stop=function(){clearInterval(n.playInterval),n.isPlay=!1,1==t.enableControls&&(n.playToggleButton.addClass(t.playClass),n.playToggleButton.removeClass(t.pauseClass)),n.preloadItemsPrev(n.currentItemIndex)},n.next=function(e,a){var r=n.currentItemIndex+1;r>=n.items.length&&(r=0),1==e&&null==n.items[n.currentItemIndex].nextAttempts&&(n.items[n.currentItemIndex].nextAttempts=1),1!=e||n.items[n.currentItemIndex].nextAttempts>t.nextAttempts||1==e&&1==n.items[n.currentItemIndex].loaded?(n.showItem(r,!0,a),n.preloadItems(n.currentItemIndex)):n.items[n.currentItemIndex].nextAttempts++},n.prev=function(){var e=n.currentItemIndex-1;e<0&&(e=n.items.length-1),n.showItem(e,!0),n.preloadItemsPrev(n.currentItemIndex)},n.showItem=function(e,a,r){return t.beforeShow(e),!!n.items[e]&&(1!=r&&1==n.isPlay&&n.play(),n.items[n.currentItemIndex]&&n.items[n.currentItemIndex].node&&(n.items[n.currentItemIndex].node.css("position","absolute"),n.items[n.currentItemIndex].node.fadeOut(t.fadeDelay)),n.currentItemIndex=e,n.items[n.currentItemIndex]&&(n.items[n.currentItemIndex].node||n.addItem(n.currentItemIndex),t.beforeAnimation(e,n.items[n.currentItemIndex].node),n.items[n.currentItemIndex].node.css("position","relative"),n.items[n.currentItemIndex].node.fadeIn(t.fadeDelay,t.afterShow())),1==a&&(n.preloadItems(n.currentItemIndex),n.preloadItemsPrev(n.currentItemIndex)),!0)},n.destroy=function(){n.stop(),n.wrapper.remove();for(var e=0;e<n.items.length;e++){delete n.items[e].node}},n.stripTags=function(e){return null!=e&&""!=e?(e=e.replace(/<\/?[^>]+>/gi,"")).replace(/"/gi,"''"):""},n.getOptions=function(){return t},e.url&&(e.dataSource=e.url),function(e){t=jQuery.extend({},a,t,e)}(e),0!=t.dataSource&&("array"==t.dataType?(n.items=t.dataSource,n.init(),t.afterInit()):jQuery.ajax({url:t.dataSource,success:function(e){var a=e.items;a.length>0&&(n.items=a,n.init(),t.afterInit())},error:function(e,a,n){t.onLoadingError(e,a,n)},dataType:t.dataType})),n}function kThumbnailPicker(e){kThumbnailPickerVersion="1.1.1";var t,a={wrapper:"#thumbnails-wrapper",dataSource:"data.json",url:void 0,dataType:"json",vertical:!1,itemsOnPage:3,preloadPagesCount:2,startItem:0,wrapperClass:"kThumbnailsWrapper",innerWrapperClass:"kThumbnailsInnerWrapper",nextPageClass:"kThumbnailsNextPage",prevPageClass:"kThumbnailsPrevPage",controlsInactiveClass:"inactive",pageClass:"kThumbnailsPage",enableControls:!0,scrollingEffect:"slide",scrollingSpeed:1e3,afterInit:function(){},beforeShow:function(e){},afterShow:function(e){},thumbnailClick:function(e){}},n={};return n.items=[],n.currentPageIndex,n.itemsCount,n.pagesCount,n.pages=[],n.prevPageButton,n.nextPageButton,n.wrapper,n.innerWrapper,n.init=function(){n.wrapper=jQuery(t.wrapper),n.wrapper.addClass(t.wrapperClass),n.innerWrapper=jQuery('<div class="'+t.innerWrapperClass+'"></div>').appendTo(n.wrapper),n.itemsCount=n.items.length,n.pagesCount=Math.ceil(n.itemsCount/t.itemsOnPage),n.pagesCount<=1&&(t.enableControls=!1),t.preloadPagesCount>n.pagesCount&&(t.preloadPagesCount=n.pagesCount),1==t.enableControls?n.initControls():n.initControlsNotActive(),n.showItem(t.startItem),n.preloadPages(n.currentPageIndex)},n.initControlsNotActive=function(){n.prevPageButton=jQuery('<div class="'+t.prevPageClass+" "+t.controlsInactiveClass+'"></div>').appendTo(n.wrapper),n.nextPageButton=jQuery('<div class="'+t.nextPageClass+" "+t.controlsInactiveClass+'"></div>').appendTo(n.wrapper)},n.initControls=function(){n.prevPageButton=jQuery('<div class="'+t.prevPageClass+'"></div>').appendTo(n.wrapper),n.prevPageButton.click(function(){n.prev()}),n.nextPageButton=jQuery('<div class="'+t.nextPageClass+'"></div>').appendTo(n.wrapper),n.nextPageButton.click(function(){n.next()})},n.getPageIndex=function(e){return pageIndex=Math.ceil((e+1)/t.itemsOnPage)-1,pageIndex},n.preloadPage=function(e){if(!n.pages[e]){n.pages[e]=jQuery('<div class="'+t.pageClass+'" style="display: none;"></div>').appendTo(n.innerWrapper);for(var a=e*t.itemsOnPage,r=a+t.itemsOnPage,s=a;s<r;s++)if(n.items[s]){var i=jQuery("<img/>").attr("src",n.items[s].thumb);i.appendTo(n.pages[e]),n.items[s].thumbnailNode=i,i.bind("click",{itemIndex:s},function(e){t.thumbnailClick(e.data.itemIndex)})}}},n.preloadPages=function(e){for(var a=1;a<=t.preloadPagesCount;a++){var r=n.currentPageIndex+a;r>=n.pagesCount&&(r-=n.pagesCount),n.pages[r]||n.preloadPage(r)}},n.preloadPagesPrev=function(e){for(var a=1;a<=t.preloadPagesCount;a++){var r=n.currentPageIndex-a;r<0&&(r+=n.pagesCount),n.pages[r]||n.preloadPage(r)}},n.showPage=function(e,a){if(t.beforeShow(a),e>=0&&e<n.pagesCount&&e!=n.currentPageIndex){n.pages[e]||n.preloadPage(e);var r=n.getScrollingEffect(e),s=n.currentPageIndex;n.pages[s]&&n.pages[s].animate(r.fadeOutEffect,t.scrollingSpeed),n.currentPageIndex=e,n.pages[e].css(r.hiddenMap),n.pages[e].animate(r.fadeInEffect,t.scrollingSpeed,t.afterShow(a)),1==t.enableControls&&(0==n.currentPageIndex?(n.prevPageButton.addClass(t.controlsInactiveClass),n.nextPageButton.removeClass(t.controlsInactiveClass)):n.currentPageIndex>=n.pagesCount-1?(n.nextPageButton.addClass(t.controlsInactiveClass),n.prevPageButton.removeClass(t.controlsInactiveClass)):(n.nextPageButton.removeClass(t.controlsInactiveClass),n.prevPageButton.removeClass(t.controlsInactiveClass)))}},n.getScrollingEffect=function(e){var a={};switch(t.scrollingEffect){case"slide":e==n.currentPageIndex+1?0==t.vertical?(a.fadeOutEffect={left:"-100%"},a.fadeInEffect={left:"0%",opacity:"1"},a.hiddenMap={left:"100%",display:"block"}):(a.fadeOutEffect={top:"-100%"},a.fadeInEffect={top:"0%",opacity:"1"},a.hiddenMap={top:"100%",display:"block"}):e==n.currentPageIndex-1?0==t.vertical?(a.fadeOutEffect={left:"100%"},a.fadeInEffect={left:"0%",opacity:"1"},a.hiddenMap={left:"-100%",display:"block"}):(a.fadeOutEffect={top:"100%"},a.fadeInEffect={top:"0%",opacity:"1"},a.hiddenMap={top:"-100%",display:"block"}):(a.fadeOutEffect={opacity:"0"},a.fadeInEffect={opacity:"1",left:"0%",top:"0%"},a.hiddenMap={opacity:"0",left:"0%",top:"0%",display:"block"});break;case"fade":a.fadeOutEffect={opacity:"0"},a.fadeInEffect={opacity:"1"},a.hiddenMap={opacity:"0",display:"block"};break;default:t.scrollingEffect="slide",a=n.getScrollingEffect(e)}return a},n.showItem=function(e){var t=n.getPageIndex(e);n.showPage(t)},n.next=function(){if(n.currentPageIndex+1<n.pagesCount){var e=n.currentPageIndex+1;n.showPage(e,!0),n.preloadPages(n.currentPageIndex)}},n.prev=function(){if(n.currentPageIndex-1>=0){var e=n.currentPageIndex-1;n.showPage(e,!0),n.preloadPagesPrev(n.currentPageIndex)}},n.destroy=function(){n.wrapper.remove()},e.url&&(e.dataSource=e.url),function(e){t=jQuery.extend({},a,t,e)}(e),0!=t.dataSource&&("array"==t.dataType?(n.items=t.dataSource,n.init(),t.afterInit()):jQuery.ajax({url:t.dataSource,success:function(e){var a=e.items;a.length>0&&(n.items=a,n.init(),t.afterInit())},dataType:t.dataType})),n}function kGallery(e){window.kGalleryVersion="1.1.1";var t,a={wrapper:"#gallery-wrapper",dataSource:"data.json",url:void 0,dataType:"json",startItem:0,slideshowOptions:{},thumbnailPickerOptions:{},wrapperClass:"kGallery",selectedThumbnailClass:"selectedThumbnail",afterInit:function(){},beforeShow:function(e){}},n={};if(n.index=null,n.items=[],n.wrapper,n.slideshow,n.thumbnailsPicker,n.lastThumbnail,n.init=function(){n.wrapper=jQuery(t.wrapper);var e=n.wrapper.data("kGalleryInstance");e&&e.destroy(),n.wrapper.addClass(t.wrapperClass),n.initSlideshow(),n.initThumbnailPicker(),n.wrapper.data("kGalleryInstance",n)},n.destroy=function(){},n.initThumbnailPicker=function(){var e={dataSource:!1,startItem:t.startItem};t.thumbnailPickerOptions.wrapper||(e.wrapper=jQuery("<div></div>").appendTo(n.wrapper)),e.thumbnailClick=function(e){n.slideshow&&e!=n.slideshow.currentItemIndex&&n.slideshow.showItem(e)},e.beforeShow=function(e){1==n.slideshow.isPlay&&n.slideshow.play()};var a=jQuery.extend({},e,t.thumbnailPickerOptions);n.thumbnailPicker=kThumbnailPicker(a),n.thumbnailPicker.items=n.items,n.thumbnailPicker.init(),n.thumbnailPicker.items[t.startItem]&&n.thumbnailPicker.items[t.startItem].thumbnailNode&&(n.lastThumbnail=n.thumbnailPicker.items[t.startItem].thumbnailNode,n.lastThumbnail.addClass(t.selectedThumbnailClass))},n.initSlideshow=function(){var e={dataSource:!1,startItem:t.startItem};t.slideshowOptions.wrapper||(e.wrapper=jQuery("<div></div>").appendTo(n.wrapper)),e.beforeShow=function(e){t.beforeShow(e),n.thumbnailPicker&&n.thumbnailPicker.items[e].thumbnailNode&&(n.thumbnailPicker.items[e].thumbnailNode.addClass(t.selectedThumbnailClass),n.lastThumbnail.removeClass(t.selectedThumbnailClass),n.lastThumbnail=n.thumbnailPicker.items[e].thumbnailNode)},e.afterShow=function(){n.thumbnailPicker&&n.thumbnailPicker.showItem(n.slideshow.currentItemIndex)};var a=jQuery.extend({},e,t.slideshowOptions);n.slideshow=kSlideshow(a),n.slideshow.items=n.items,n.slideshow.init()},n.destroy=function(){n.slideshow.destroy(),n.thumbnailPicker.destroy()},"string"==typeof e||e instanceof jQuery||"object"==typeof e&&e.nodeType){var r=jQuery(e).data("kGalleryInstance");if(r)return r}return e.url&&(e.dataSource=e.url),!("object"!=typeof e||!e.dataSource)&&(function(e){t=jQuery.extend({},a,t,e)}(e),"array"==t.dataType?(n.items=t.dataSource,n.init(),t.afterInit()):jQuery.ajax({url:t.dataSource,success:function(e){var a=e.items;n.items=a,n.init(),t.afterInit()},dataType:t.dataType}),n)}jQuery.fn.kGallery=function(e){var t={};return"string"==typeof e?(t.url=e,t.wrapper=jQuery(this)):"object"==typeof e?(t=e).wrapper=jQuery(this):void 0===e&&(t=$(this)),kGallery(t)};
